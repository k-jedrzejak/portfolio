{"ast":null,"code":"import FlyUnicornSvg from './FlyUnicornSvg.vue';\nimport gsap from 'gsap';\nimport { loopSineInOut } from '@/constants';\nexport default {\n  name: 'FlyUnicorn',\n  props: ['game'],\n  components: {\n    FlyUnicornSvg\n  },\n\n  data() {\n    return {\n      unicorn: null\n    };\n  },\n\n  methods: {\n    unicornAnimation() {\n      const uni = document.querySelectorAll('#unicorn');\n      const uniFringe = document.querySelectorAll('#unicorn .hair1');\n      const uniEye = document.querySelector('#unicorn .eye');\n      const uniHair = document.querySelectorAll('#unicorn .hair2');\n      const umbrella = document.querySelector('#unicorn .umbrella');\n      const umbrellaStick = document.querySelectorAll('#unicorn .umbrella-stick');\n      const hand = document.querySelectorAll('#unicorn .hand');\n      const timeline = gsap.timeline();\n      uniFringe.forEach(hair => {\n        timeline.fromTo(hair, {\n          rotateZ: 0\n        }, {\n          rotateZ: 5,\n          duration: 1.3,\n          transformOrigin: \"100% 50%\",\n          ...loopSineInOut\n        }, 0);\n      });\n      uniHair.forEach(hair => {\n        timeline.fromTo(hair, {\n          y: 0,\n          x: -1\n        }, {\n          y: 1,\n          x: 1,\n          duration: 1.3,\n          transformOrigin: \"50% 50%\",\n          ...loopSineInOut\n        }, 0);\n      });\n      timeline\n      /* unicorn */\n      .fromTo(uni, {\n        rotateZ: 1\n      }, {\n        rotateZ: \"random(2, 6)\",\n        duration: \"random(1, 2)\",\n        ...loopSineInOut,\n        repeatRefresh: true\n      }, 0)\n      /* umbrella */\n      .fromTo(umbrella, {\n        rotateZ: -2,\n        x: 1\n      }, {\n        rotateZ: 2,\n        x: 1,\n        duration: 1,\n        transformOrigin: \"50% 50%\",\n        ...loopSineInOut\n      }, 0)\n      /* umbrella stick */\n      .fromTo(umbrellaStick, {\n        rotateZ: -2,\n        x: -2.5\n      }, {\n        rotateZ: 2,\n        x: -2.5,\n        duration: 1,\n        transformOrigin: \"50% 50%\",\n        ...loopSineInOut\n      }, 0)\n      /* hand  */\n      .fromTo(hand, {\n        rotateZ: 2\n      }, {\n        rotateZ: -2,\n        duration: 1,\n        transformOrigin: \"100% 100%\",\n        ...loopSineInOut\n      }, 0)\n      /* eye  */\n      .fromTo(uniEye, {\n        scaleY: 1\n      }, {\n        scaleY: 1,\n        transformOrigin: '50% 50%',\n        repeat: -1,\n        duration: 2,\n        repeatDelay: .2\n      }, 0).fromTo(uniEye, {\n        scaleY: .1\n      }, {\n        scaleY: 1,\n        transformOrigin: '50% 50%',\n        repeat: -1,\n        delay: 2,\n        duration: .2,\n        repeatDelay: 2\n      }, 1);\n    },\n\n    moveUnicorn(element) {\n      let pxPerSecond = 50;\n      let newPos = {\n        x: gsap.utils.random(-window.innerWidth, window.innerWidth * 2),\n        y: gsap.utils.random(-window.innerHeight, window.innerHeight * 2)\n      };\n      let curPos = {\n        x: gsap.getProperty(element, \"x\"),\n        y: gsap.getProperty(element, \"y\")\n      };\n      let deltaX = curPos.x - newPos.x;\n      let deltaY = curPos.y - newPos.y;\n      let distance = Math.hypot(deltaX, deltaY);\n      let duration = distance / pxPerSecond;\n      gsap.to(element, {\n        x: newPos.x,\n        y: newPos.y,\n        duration: duration,\n        ease: \"none\",\n        onComplete: this.moveUnicorn,\n        onCompleteParams: [element]\n      });\n      curPos.x > newPos.x ? gsap.to(element, {\n        scaleX: 1,\n        duration: 0\n      }) : gsap.to(element, {\n        scaleX: -1,\n        duration: 0\n      });\n    },\n\n    doubleTapUnicorn(element) {\n      let lastClick = 0;\n      element.addEventListener('touchstart', () => {\n        let date = new Date();\n        let time = date.getTime();\n        const time_between_taps = 200;\n\n        if (time - lastClick < time_between_taps) {\n          this.openGame();\n        }\n\n        lastClick = time;\n      }, {\n        passive: true\n      });\n    },\n\n    doubleClickUnicorn(element) {\n      element.addEventListener('dblclick', () => {\n        this.openGame();\n      });\n    },\n\n    openGame() {\n      this.setGame = true;\n      this.$emit('openGame');\n    }\n\n  },\n\n  mounted() {\n    this.unicorn = document.querySelector('.unicorn');\n    this.unicornAnimation();\n    this.moveUnicorn(this.unicorn);\n    this.doubleTapUnicorn(this.unicorn);\n    this.doubleClickUnicorn(this.unicorn);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["FlyUnicornSvg","gsap","loopSineInOut","name","props","components","data","unicorn","methods","unicornAnimation","uni","document","querySelectorAll","uniFringe","uniEye","querySelector","uniHair","umbrella","umbrellaStick","hand","timeline","forEach","hair","fromTo","rotateZ","duration","transformOrigin","y","x","repeatRefresh","scaleY","repeat","repeatDelay","delay","moveUnicorn","element","pxPerSecond","newPos","utils","random","window","innerWidth","innerHeight","curPos","getProperty","deltaX","deltaY","distance","Math","hypot","to","ease","onComplete","onCompleteParams","scaleX","doubleTapUnicorn","lastClick","addEventListener","date","Date","time","getTime","time_between_taps","openGame","passive","doubleClickUnicorn","setGame","$emit","mounted"],"sourceRoot":"","sources":["/home/runner/work/portfolio/portfolio/src/components/characters/unicorn/FlyUnicorn.vue"],"sourcesContent":["\n<template>\n    <FlyUnicornSvg class=\"unicorn\" @change=\"openGame\" />\n</template>\n\n<script>\nimport FlyUnicornSvg from './FlyUnicornSvg.vue';\nimport gsap from 'gsap';\nimport {loopSineInOut} from '@/constants';\n\nexport default ({\n    name: 'FlyUnicorn',\n    props: ['game'],\n    components: { FlyUnicornSvg},\n    data() {\n        return {\n            unicorn: null,\n        }\n    },\n    methods: {\n      unicornAnimation() {\n        const uni = document.querySelectorAll('#unicorn');\n        const uniFringe = document.querySelectorAll('#unicorn .hair1');\n        const uniEye = document.querySelector('#unicorn .eye');\n        const uniHair = document.querySelectorAll('#unicorn .hair2');\n        const umbrella = document.querySelector('#unicorn .umbrella');\n        const umbrellaStick = document.querySelectorAll('#unicorn .umbrella-stick');\n        const hand = document.querySelectorAll('#unicorn .hand');\n        const timeline = gsap.timeline();\n  \n        uniFringe.forEach(hair => {\n          timeline\n            .fromTo(hair, {rotateZ: 0}, {\n              rotateZ: 5,\n              duration: 1.3,\n              transformOrigin: \"100% 50%\",\n              ...loopSineInOut,\n            },0 )\n        })\n\n        uniHair.forEach(hair => {\n          timeline\n            .fromTo(hair, {y: 0, x: -1}, {\n              y: 1,\n              x: 1,\n              duration: 1.3,\n              transformOrigin: \"50% 50%\",\n              ...loopSineInOut\n            },0 )\n        })\n\n        timeline\n       /* unicorn */\t\n        .fromTo(uni, { rotateZ: 1}, {\n          rotateZ: \"random(2, 6)\",\n          duration: \"random(1, 2)\",\n          ...loopSineInOut,\n          repeatRefresh: true\n        },0)\n        /* umbrella */\t\n        .fromTo(umbrella, {rotateZ: -2, x: 1}, {\n              rotateZ: 2,\n              x: 1,\n              duration: 1,\n              transformOrigin: \"50% 50%\",\n              ...loopSineInOut\n            },0 )\n\n        /* umbrella stick */\t\n        .fromTo(umbrellaStick, {rotateZ: -2, x: -2.5}, {\n            rotateZ: 2,\n            x: -2.5,\n            duration: 1,\n            transformOrigin: \"50% 50%\",\n            ...loopSineInOut\n        },0 )\n\n        /* hand  */\t\n        .fromTo(hand, {rotateZ: 2}, {\n            rotateZ: -2,\n            duration: 1,\n            transformOrigin: \"100% 100%\",\n            ...loopSineInOut\n          },0 )\n\n        /* eye  */\t\n        .fromTo(uniEye, {scaleY: 1},{\n          scaleY: 1,\n          transformOrigin: '50% 50%',\n          repeat: -1,\n          duration: 2,\n          repeatDelay: .2,\n        },0)\n\n        .fromTo(uniEye, {scaleY: .1},{\n          scaleY: 1,\n          transformOrigin: '50% 50%',\n          repeat: -1,\n          delay: 2,\n          duration: .2,\n          repeatDelay: 2,\n        },1)\n      },\n\n      moveUnicorn(element) {\n        let pxPerSecond = 50;\n        let newPos = {\n          x:gsap.utils.random(-window.innerWidth, window.innerWidth * 2),\n          y:gsap.utils.random(-window.innerHeight, window.innerHeight * 2)\n        }\n\n        let curPos = {\n          x:gsap.getProperty(element, \"x\"),\n          y:gsap.getProperty(element, \"y\")\n        }\n\n        let deltaX = curPos.x - newPos.x\n        let deltaY = curPos.y - newPos.y\n        let distance = Math.hypot(deltaX, deltaY)\n        let duration = distance / pxPerSecond\n\n        gsap.to(element, {\n          x: newPos.x, \n          y: newPos.y, \n          duration: duration, \n          ease:\"none\",\n          onComplete: this.moveUnicorn, \n          onCompleteParams:[element]\n        }) \n\n        curPos.x > newPos.x ? \n          gsap.to(element,{scaleX: 1, duration: 0}) : \n          gsap.to(element,{scaleX: -1, duration: 0});\n        },\n\n        doubleTapUnicorn(element) {\n          let lastClick = 0;\n          element.addEventListener('touchstart', () => {\n            let date = new Date();\n            let time = date.getTime();\n            \n            const time_between_taps = 200; \n            if (time - lastClick < time_between_taps) {\n              this.openGame();\n            }\n            lastClick = time;\n          }, {passive: true})\n        },\n\n        doubleClickUnicorn(element) {\n          element.addEventListener('dblclick', () => {\n            this.openGame();\n          })\n        },\n\n        openGame() {\n          this.setGame = true\n          this.$emit('openGame')\n        },\n    },\n    \n    mounted() {\n      this.unicorn = document.querySelector('.unicorn');\n      this.unicornAnimation();\n      this.moveUnicorn(this.unicorn);\n      this.doubleTapUnicorn(this.unicorn);\n      this.doubleClickUnicorn(this.unicorn);\n    },\n\n});\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n\n#unicorn {\n  @include size(24vw, auto);\n  @include absolute(30%, null, null, 10%);\n  z-index: 2000;\n  cursor: pointer;\n\n    @media screen and (min-width: $screen-desktop) {\n      @include size(10vw, auto); \n    }\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}